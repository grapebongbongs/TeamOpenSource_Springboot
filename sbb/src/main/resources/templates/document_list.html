<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>내 PDF 목록</title>

    <!-- 공통 스타일 -->
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>

<!-- ✅ 상단 네비바 -->
<div th:replace="navbar :: nav"></div>

<!-- ✅ 메인 컨테이너 -->
<div class="container" style="max-width: 900px; margin: 60px auto;">

    <h1 class="page-title">내가 업로드한 PDF 목록</h1>
    <p style="margin-top:-6px; margin-bottom:18px; font-size:14px; color:#6b7280;">
        아래는 업로드한 PDF 문서 목록이에요. 클릭하면 문서 내용을 확인할 수 있습니다.
    </p>

    <!-- ✅ 상단 액션 -->
    <div class="card" style="margin-bottom: 16px;">
        <div style="
            display:flex;
            justify-content:space-between;
            align-items:center;
            gap:12px;
            flex-wrap:wrap;
        ">
            <span style="color:#555; font-size:14px;">
                총 <span th:text="${#lists.size(docs)}">0</span>개 문서
            </span>

            <a th:href="@{/document/upload}" class="btn">
                ➕ 새 PDF 업로드
            </a>
        </div>
    </div>

    <!-- ✅ 목록 테이블 -->
    <div class="card">
        <table class="table" style="width:100%; border-collapse:collapse;">
            <thead>
            <tr>
                <th>ID</th>
                <th>파일명</th>
                <th>업로드 시각</th>
                <th>텍스트 미리보기</th>
            </tr>
            </thead>
            <tbody>
            <tr th:if="${#lists.isEmpty(docs)}">
                <td colspan="4" style="text-align:center; padding:24px 0; color:#777;">
                    업로드된 PDF가 없습니다. 먼저 파일을 업로드해 주세요.
                </td>
            </tr>

            <!-- ✅ 반복 출력 -->
            <tr th:each="doc : ${docs}">
                <td th:text="${doc.id}"></td>
                <td th:text="${doc.originalFilename}"></td>
                <td th:text="${#temporals.format(doc.uploadedAt, 'yyyy-MM-dd HH:mm')}"></td>
                <td th:text="${#strings.abbreviate(doc.contentText, 80)}"></td>
            </tr>
            </tbody>
        </table>
    </div>

    <!-- ✅ 하단 버튼 -->
    <div style="display:flex; justify-content:flex-end; margin-top: 12px;">
        <a th:href="@{/document/upload}" class="btn btn-outline">
            ⬆️ PDF 추가 업로드
        </a>
    </div>

</div>

</body>
</html>
